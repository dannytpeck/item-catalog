{% extends "main.html" %}
{% block content %}
  {% include "header.html" %}

  <h1>Catalog App</h1>

  <div class="flash">
    {% with messages = get_flashed_messages() %}
      {% if messages %}
        <ul>
          {% for message in messages %}
            <li><strong>{{message}}</strong></li>
          {% endfor %}
        </ul>
      {% endif %}
    {% endwith %}
  </div>

  <div class="categories">

    {% if 'username' in session %}
      <a href="{{ url_for('new_category') }}">Add Category</a>
    {% endif %}

    {% for category in categories %}
      <div class="category">
        <h4 class="name"><a href="{{ url_for('show_items', category_name = category.name) }}">{{category.name}}</a></h4>

        {% if 'username' in session %}
          <div class="category-edit-delete">
            <a href="{{ url_for('edit_category', category_name = category.name) }}">Edit</a> /
            <a href="{{ url_for('delete_category', category_name = category.name) }}">Delete</a>
          </div>
        {% endif %}
      </div>

    {% endfor %}

  </div>

  {% if items %}
    <div class="items">

      {% if 'username' in session %}
        <a href="{{ url_for('new_item', category_name = category.name) }}">Add Item</a>
      {% endif %}

      {% for item in items %}
        <div class="item">
          <h4 class="name"><a href="#">{{item.name}}</a></h4>

          {% if 'username' in session %}
            <div>
              <a href="{{ url_for('edit_item', category_name = category.name, item_name = item.name) }}">Edit</a> /
              <a href="{{ url_for('delete_item', category_name = category.name, item_name = item.name) }}">Delete</a>
            </div>
          {% endif %}
        </div>
      {% endfor %}
    </div>
  {% endif %}

{% endblock %}
